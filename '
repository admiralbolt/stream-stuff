from api.utils.stoppable_thread import StoppableThread

class PollManager:
  # A poll is actively running.
  is_running = False
  thread = None
  poll = None
  current_timer = -1

  def poll_poll(self):

    while not self.thread.stopped() and self.current_timer > 0:
      # Do stuff

      self.current_timer -= 1




    return

  def start_poll(self, poll):
    self.poll = poll
    self.current_timer = self.poll.timer
    self.thread = StoppableThread(target=self.poll_poll)
    self.thread.start()
    self.is_running = True

  def stop_poll(self):
    if self.is_running:
      return

    self.thread.stop()
